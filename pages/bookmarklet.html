<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebHarvest Pro - Bookmarklet</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e1b4b 0%, #312e81 50%, #1e1b4b 100%);
            min-height: 100vh;
            color: white;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        .back-link {
            display: inline-block;
            color: #a5b4fc;
            text-decoration: none;
            margin-bottom: 20px;
        }
        .bookmarklet-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            margin-bottom: 30px;
        }
        .bookmarklet-btn {
            display: inline-block;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            padding: 20px 40px;
            border-radius: 15px;
            font-size: 1.5em;
            font-weight: bold;
            text-decoration: none;
            cursor: move;
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.4);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .bookmarklet-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(99, 102, 241, 0.6);
        }
        .hint {
            margin-top: 20px;
            color: #a5b4fc;
            font-size: 1.2em;
        }
        .steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .step {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 15px;
        }
        .step-number {
            background: #6366f1;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .step h3 {
            margin-bottom: 10px;
        }
        .step p {
            color: #a5b4fc;
            font-size: 0.9em;
        }
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }
        .feature {
            background: rgba(99, 102, 241, 0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        .feature-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        
        <h1>ğŸš€ Ø£Ø¯Ø§Ø© Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h1>
        
        <div class="bookmarklet-container">
            <a href="javascript:(function(){if(window.__webharvest_running){alert('WebHarvest Pro ÙŠØ¹Ù…Ù„ Ø¨Ø§Ù„ÙØ¹Ù„!');return}window.__webharvest_running=true;const CONFIG={targetOrigin:'https://ahmedsheta89-cell.github.io',targetPath:'/WebHarvest-Pro/',storageKey:'webharvest_products_data'};const ProductDetector={patterns:{productCard:['[class*=\"product\"]','[class*=\"item\"]','[class*=\"card\"]','[data-product-id]','[data-product]','[itemtype*=\"Product\"]'],name:['h1','h2','h3','[class*=\"title\"]','[class*=\"name\"]','[itemprop=\"name\"]','a[title]'],price:['[class*=\"price\"]','[itemprop=\"price\"]','[data-price]','.amount','.value'],image:['img[src*=\"product\"]','img[class*=\"product\"]','img[itemprop=\"image\"]','.product-image img','.gallery-image img'],description:['[class*=\"description\"]','[itemprop=\"description\"]','.details','.content']},detectCards(){let cards=[];for(let pattern of this.patterns.productCard){let elements=document.querySelectorAll(pattern);elements.forEach(el=>{if(el.offsetWidth>50&&el.offsetHeight>50&&!cards.includes(el)){cards.push(el)}})}return cards.length>0?cards:this.detectCardsFallback()},detectCardsFallback(){const allElements=document.querySelectorAll('*');let potentialCards=[];allElements.forEach(el=>{if(el.offsetWidth>100&&el.offsetWidth<500&&el.offsetHeight>100&&el.offsetHeight<800){let hasPrice=el.querySelector('[class*=\"price\"]')||el.querySelector('[itemprop=\"price\"]');let hasImage=el.querySelector('img');if(hasPrice&&hasImage){potentialCards.push(el)}}});return potentialCards},extractFromCard(card){const product={source:window.location.href,scrapedAt:new Date().toISOString()};const nameEl=card.querySelector(this.patterns.name.join(','));product.name=nameEl?nameEl.textContent.trim():'';const priceEl=card.querySelector(this.patterns.price.join(','));if(priceEl){const priceText=priceEl.textContent||priceEl.value||'';const priceMatch=priceText.match(/[\d,]+\.?\d*/);product.price=priceMatch?parseFloat(priceMatch[0].replace(/,/g,'')):0}else{product.price=0}const imgEl=card.querySelector(this.patterns.image.join(','));product.image=imgEl?(imgEl.src||imgEl.dataset.src||''):'';product.images=[];card.querySelectorAll('img').forEach(img=>{const src=img.src||img.dataset.src;if(src&&!src.includes('data:image')&&!product.images.includes(src)){product.images.push(src)}});const descEl=card.querySelector(this.patterns.description.join(','));product.description=descEl?descEl.textContent.trim():'';return product}};let state={mode:null,selectedProducts:[],detectedCards:[],currentSelection:null};const UIManager={overlay:null,create(){this.overlay=document.createElement('div');this.overlay.id='webharvest-overlay';this.overlay.innerHTML='<style>#webharvest-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:2147483647;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,sans-serif;direction:rtl}#wh-modal{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:linear-gradient(135deg,#1e1b4b 0%,#312e81 100%);border-radius:20px;padding:30px;min-width:400px;max-width:90vw;max-height:90vh;overflow-y:auto;box-shadow:0 25px 80px rgba(0,0,0,0.8);color:white}.wh-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;padding-bottom:15px;border-bottom:1px solid rgba(255,255,255,0.1)}.wh-title{font-size:1.5em;font-weight:bold;display:flex;align-items:center;gap:10px}.wh-close{background:rgba(255,255,255,0.1);border:none;color:white;width:35px;height:35px;border-radius:50%;cursor:pointer;font-size:1.2em}.wh-modes{display:flex;gap:10px;margin-bottom:20px}.wh-mode-btn{flex:1;padding:15px;border:none;border-radius:12px;cursor:pointer;font-size:1em;font-weight:bold;transition:all 0.3s}.wh-mode-btn.active{background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%);color:white}.wh-mode-btn:not(.active){background:rgba(255,255,255,0.1);color:white}.wh-mode-btn:hover:not(.active){background:rgba(255,255,255,0.2)}#wh-content{min-height:200px}.wh-products{max-height:400px;overflow-y:auto;margin-bottom:15px}.wh-product-item{display:flex;align-items:center;gap:15px;padding:12px;background:rgba(255,255,255,0.05);border-radius:10px;margin-bottom:10px;cursor:pointer;transition:background 0.2s}.wh-product-item:hover{background:rgba(255,255,255,0.1)}.wh-product-item.selected{background:rgba(99,102,241,0.3);border:2px solid #6366f1}.wh-product-item input{width:20px;height:20px}.wh-product-image{width:50px;height:50px;object-fit:cover;border-radius:8px}.wh-product-info{flex:1}.wh-product-name{font-weight:bold;margin-bottom:5px}.wh-product-price{color:#a5b4fc}.wh-actions{display:flex;gap:10px;margin-top:20px}.wh-btn{flex:1;padding:15px;border:none;border-radius:12px;cursor:pointer;font-size:1em;font-weight:bold;transition:all 0.3s}.wh-btn-primary{background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%);color:white}.wh-btn-primary:hover{transform:translateY(-2px);box-shadow:0 10px 20px rgba(99,102,241,0.4)}.wh-btn-secondary{background:rgba(255,255,255,0.1);color:white}.wh-btn-secondary:hover{background:rgba(255,255,255,0.2)}.wh-status{text-align:center;padding:20px;color:#a5b4fc}.wh-highlight{outline:3px solid #6366f1 !important;outline-offset:2px !important;cursor:pointer !important}</style><div id=\"wh-modal\"><div class=\"wh-header\"><div class=\"wh-title\">ğŸ›’ WebHarvest Pro</div><button class=\"wh-close\" onclick=\"window.__webharvest_close()\">Ã—</button></div><div class=\"wh-modes\"><button class=\"wh-mode-btn\" data-mode=\"single\">ğŸ“¦ Ù…Ù†ØªØ¬ ÙˆØ§Ø­Ø¯</button><button class=\"wh-mode-btn\" data-mode=\"manual\">ğŸ“Š ØªØ­Ø¯ÙŠØ¯ ÙŠØ¯ÙˆÙŠ</button><button class=\"wh-mode-btn active\" data-mode=\"auto\">ğŸš€ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„ÙƒÙ„</button></div><div id=\"wh-content\"><div class=\"wh-status\">Ø¬Ø§Ø±Ù Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...</div></div><div class=\"wh-actions\" style=\"display:none\"><button class=\"wh-btn wh-btn-primary\" id=\"wh-send\">ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button><button class=\"wh-btn wh-btn-secondary\" id=\"wh-cancel\">Ø¥Ù„ØºØ§Ø¡</button></div></div>';document.body.appendChild(this.overlay);this.bindEvents()},bindEvents(){const closeBtn=this.overlay.querySelector('.wh-close');closeBtn.onclick=()=>this.destroy();const modeButtons=this.overlay.querySelectorAll('.wh-mode-btn');modeButtons.forEach(btn=>{btn.onclick=()=>{modeButtons.forEach(b=>b.classList.remove('active'));btn.classList.add('active');state.mode=btn.dataset.mode;this.updateUI()}});const sendBtn=this.overlay.querySelector('#wh-send');sendBtn.onclick=()=>this.sendProducts();const cancelBtn=this.overlay.querySelector('#wh-cancel');cancelBtn.onclick=()=>{state.selectedProducts=[];this.updateUI()}},updateUI(){const content=this.overlay.querySelector('#wh-content');const actions=this.overlay.querySelector('.wh-actions');if(state.mode==='single'){content.innerHTML='<div class=\"wh-status\">ğŸ‘† Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ù…Ù†ØªØ¬ ÙÙŠ Ø§Ù„ØµÙØ­Ø©</div>';actions.style.display='none';document.querySelectorAll('.wh-highlight').forEach(el=>el.classList.remove('wh-highlight'));document.addEventListener('click',this.handleSingleClick,true)}else if(state.mode==='manual'){document.removeEventListener('click',this.handleSingleClick,true);state.detectedCards=ProductDetector.detectCards();content.innerHTML='<div class=\"wh-status\">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù„ÙŠ ØªØ­Ø¨ ØªØ¶ÙŠÙÙ‡Ø§ ('+state.detectedCards.length+' Ù…Ù†ØªØ¬ Ù…ØªØ§Ø­)</div>';actions.style.display='flex';state.detectedCards.forEach(card=>{card.classList.add('wh-highlight');card.onclick=(e)=>{e.stopPropagation();e.preventDefault();const product=ProductDetector.extractFromCard(card);if(!state.selectedProducts.find(p=>p.name===product.name&&p.price===product.price)){state.selectedProducts.push(product);card.style.outline='3px solid #10b981';this.updateManualSelection()}}})}else{document.removeEventListener('click',this.handleSingleClick,true);document.querySelectorAll('.wh-highlight').forEach(el=>el.classList.remove('wh-highlight'));state.detectedCards=ProductDetector.detectCards();state.selectedProducts=state.detectedCards.map(card=>ProductDetector.extractFromCard(card)).filter(p=>p.name);if(state.selectedProducts.length===0){content.innerHTML='<div class=\"wh-status\">âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§ÙƒØªØ´Ø§Ù Ù…Ù†ØªØ¬Ø§Øª. Ø¬Ø±Ø¨ ÙˆØ¶Ø¹ \"ØªØ­Ø¯ÙŠØ¯ ÙŠØ¯ÙˆÙŠ\"</div>';actions.style.display='none'}else{let html='<div class=\"wh-products\">';state.selectedProducts.forEach((product,index)=>{html+='<div class=\"wh-product-item\"><input type=\"checkbox\" checked onchange=\"window.__webharvest_toggle('+index+')\">'+(product.image?'<img src=\"'+product.image+'\" class=\"wh-product-image\" onerror=\"this.style.display=\\'none\\'\">':'')+'<div class=\"wh-product-info\"><div class=\"wh-product-name\">'+(product.name||'Ù…Ù†ØªØ¬ Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…')+'</div><div class=\"wh-product-price\">'+(product.price?product.price+' Ø¬Ù†ÙŠÙ‡':'Ø³Ø¹Ø± ØºÙŠØ± Ù…ØªÙˆÙØ±')+'</div></div></div>'});html+='</div>';content.innerHTML=html;this.overlay.querySelector('#wh-selected-count').textContent=state.selectedProducts.length;actions.style.display='flex'}}},handleSingleClick(e){if(state.mode!=='single')return;const target=e.target.closest('[class*=\"product\"],[class*=\"item\"],[class*=\"card\"]');if(target){e.stopPropagation();e.preventDefault();const product=ProductDetector.extractFromCard(target);state.selectedProducts=[product];this.sendProducts()}},updateManualSelection(){const content=this.overlay.querySelector('#wh-content');let html='<div class=\"wh-status\">âœ… ØªÙ… ØªØ­Ø¯ÙŠØ¯ '+state.selectedProducts.length+' Ù…Ù†ØªØ¬</div><div class=\"wh-products\">';state.selectedProducts.forEach((product,index)=>{html+='<div class=\"wh-product-item selected">'+(product.image?'<img src=\"'+product.image+'\" class=\"wh-product-image\" onerror=\"this.style.display=\\'none\\'\">':'')+'<div class=\"wh-product-info\"><div class=\"wh-product-name\">'+(product.name||'Ù…Ù†ØªØ¬ Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…')+'</div><div class=\"wh-product-price\">'+(product.price?product.price+' Ø¬Ù†ÙŠÙ‡':'Ø³Ø¹Ø± ØºÙŠØ± Ù…ØªÙˆÙØ±')+'</div></div></div>'});html+='</div>';content.innerHTML=html;this.overlay.querySelector('.wh-actions').style.display='flex'},sendProducts(){if(state.selectedProducts.length===0){alert('Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø£ÙŠ Ù…Ù†ØªØ¬!');return}try{const data={products:state.selectedProducts,source:window.location.href,timestamp:Date.now()};localStorage.setItem(CONFIG.storageKey,JSON.stringify(data));this.showSuccess(state.selectedProducts.length);setTimeout(()=>{const targetUrl=CONFIG.targetOrigin+CONFIG.targetPath+'?import='+Date.now();window.open(targetUrl,'_blank');this.destroy()},500)}catch(error){alert('Ø­Ø¯Ø« Ø®Ø·Ø£: '+error.message)}},showSuccess(count){const content=this.overlay.querySelector('#wh-content');content.innerHTML='<div style=\"text-align:center;padding:40px\"><div style=\"font-size:60px;margin-bottom:20px\">âœ…</div><div style=\"color:white;font-size:24px;margin-bottom:10px\">ØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ '+count+' Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­!</div><div style=\"color:#a5b4fc;font-size:14px\">Ø¬Ø§Ø±Ù ÙØªØ­ WebHarvest Pro...</div></div>'},destroy(){if(this.overlay)this.overlay.remove();window.__webharvest_running=false;document.querySelectorAll('.wh-highlight').forEach(el=>el.classList.remove('wh-highlight'))}};window.__webharvest_close=()=>UIManager.destroy();window.__webharvest_toggle=(index)=>{state.selectedProducts[index]._selected=!state.selectedProducts[index]._selected};UIManager.create()})()" class="bookmarklet-btn">
                ğŸ›’ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…Ù†ØªØ¬
            </a>
            <p class="hint">Ø§Ø³Ø­Ø¨Ù†ÙŠ Ø¥Ù„Ù‰ Ø´Ø±ÙŠØ· Ø§Ù„Ù…ÙØ¶Ù„Ø© â†‘</p>
        </div>
        
        <h2>ğŸ“‹ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØ«Ø¨ÙŠØª</h2>
        <div class="steps">
            <div class="step">
                <div class="step-number">1</div>
                <h3>Ø§ÙØªØ­ Ø´Ø±ÙŠØ· Ø§Ù„Ù…ÙØ¶Ù„Ø©</h3>
                <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ctrl+Shift+B (Windows) Ø£Ùˆ Cmd+Shift+B (Mac)</p>
            </div>
            <div class="step">
                <div class="step-number">2</div>
                <h3>Ø§Ø³Ø­Ø¨ Ø§Ù„Ø²Ø±</h3>
                <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± "ğŸ›’ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…Ù†ØªØ¬" ÙˆØ§Ø³Ø­Ø¨Ù‡ Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ù…ÙØ¶Ù„Ø©</p>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <h3>Ø£ÙÙ„Øª Ø§Ù„Ø²Ø±</h3>
                <p>Ø£ÙÙ„Øª Ø§Ù„Ø²Ø± ÙÙŠ Ø´Ø±ÙŠØ· Ø§Ù„Ù…ÙØ¶Ù„Ø©</p>
            </div>
            <div class="step">
                <div class="step-number">4</div>
                <h3>Ø¬Ø§Ù‡Ø²!</h3>
                <p>Ø§Ø°Ù‡Ø¨ Ù„Ø£ÙŠ Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±</p>
            </div>
        </div>
        
        <h2>âš¡ Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬</h2>
        <div class="features">
            <div class="feature">
                <div class="feature-icon">ğŸ“¦</div>
                <div>Ù…Ù†ØªØ¬ ÙˆØ§Ø­Ø¯</div>
            </div>
            <div class="feature">
                <div class="feature-icon">ğŸ“Š</div>
                <div>ØªØ­Ø¯ÙŠØ¯ ÙŠØ¯ÙˆÙŠ</div>
            </div>
            <div class="feature">
                <div class="feature-icon">ğŸš€</div>
                <div>Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„ÙƒÙ„</div>
            </div>
        </div>
    </div>
</body>
</html>
